### 問題の概要
n枚のカードが与えられ、カードには値が上からa\_iが書かれている。xとyはzとwを初期カードとして持っており、xを先手として、互いの手番で必ず1枚以上カードを引き、最後に引いたカードの値を自分のカードとして更新する。
ゲーム終了時のxとyのカードの値の差の絶対値をスコアとして、xはスコアを最大化、yはスコアを最小化しようと最適に行動するとき、このゲームのスコアはいくつになるか求めよ。

### davidの解法
メモ化再帰で解く。以下のように定義する。
```
j in {0, 1}
0: x, 1: y

ans(i, j, s, k) = i番目以降のカードが存在し、jの手番で、自分のカードs番目で、相手のカードがk番目の際に、最適に行動したときのスコア

memo[i][j][k] = i番目以降のカードが存在し、jの手番で、相手のカードがk番目の際に、最適に行動したときのスコア

ans(i, 0, s, k) = max({ans(l + 1, 1, a[l], k) | l = i, i + 1, ... })
ans(i, 1, s, k) = min({ans(l + 1, 0, s, a[l]) | l = i, i + 1, ... })
```
ここで、ansのs, kは、iとjが決まることでどちらかが不必要になる。これは、xの手番の際、xは選べるカードの中から一つ以上を引く必要があるので、それによって自分のカードが更新され、その手番の前に持っていた**自分の**カードはどこにも使われない。
よって、このansをメモ化する際に必要なインデックスは、iとjとkとなる。

実装上の注意として、最初のカードzとwをa_0とa_1として、全体を二つ右にずらすと楽に実装できる。

この解法は空間/時間計算量はO(n^2)となる。

### 公式解法
先手のxは、0枚、1枚、2枚以上残す、という戦略を取れる。スコアは、0枚残した際はabs(w - a\_n)となり、1枚の場合はabs(a_n - a_(n - 1))となる。2枚以上残した場合だが、まずはyの戦略について考える。

後手のyはカードが二枚以上残っているため、戦略の一つとして、最後の一枚を残すようにカードを引くことで、abs(a\_n - a\_(n - 1))のスコアを達成できる。
yの目的はスコアの最小化であるため、yの戦略によらず、yはabs(a\_n - a\_(n - 1))以下のスコアを達成する。

xの目的はスコアの最大化であるため、2枚以上残すことでその後yが達成する任意のスコアがabs(a\_n - a\_(n - 1))以下であることと、
1枚残すように引いた時に達成するスコアがabs(a\_n - a\_(n - 1))であることを考えると、2枚以上残さず、0枚残すか1枚残すかで比較をして大きい方を取るべきである。
これは、仮に2枚以上残した場合にyの達成するスコアがabs(a\_n - a\_(n - 1))より小さければ、xは本来達成できていたabs(a\_n - a\_(n - 1))を達成出来なくなるし、
yの達成するスコアがちょうどabs(a\_n - a\_(n - 1))の場合、答えに変わりは無いことから分かる。


### 所感
公式解法のeditorial読んでもは？という感じだったが、動画解説を見てようやく納得した。
自力解法は、以前解いた時はO(n)のメモ化再帰になっていて、自分では相手側のカードの影響を考察してないにも関わらず、メモ化していなかったので嘘解法になっていた。
また、インデックスとして持つのではなく、自分のカードをその値として持つために、unordered_mapやmapを使用したのだが、O(n^2 logn)で通らなかったので悲しかった。
